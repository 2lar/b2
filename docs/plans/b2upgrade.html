<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2 System Architecture Comparison</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1, h2, h3 {
            color: #ffffff;
        }
        
        .diagram-container {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        svg {
            width: 100%;
            height: auto;
            background: #1e1e1e;
            border-radius: 8px;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .feature-box {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4a9eff;
        }
        
        .feature-box h3 {
            margin-top: 0;
            color: #4a9eff;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #3a3a3a;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .label {
            font-weight: bold;
            color: #4a9eff;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .tech-badge {
            background: #3a3a3a;
            color: #4a9eff;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 14px;
        }
        
        .differences-section {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
        }
        
        .diff-category {
            margin: 20px 0;
        }
        
        .diff-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .diff-table th {
            background: #3a3a3a;
            padding: 12px;
            text-align: left;
            color: #4a9eff;
        }
        
        .diff-table td {
            padding: 12px;
            border-bottom: 1px solid #3a3a3a;
        }
        
        .diff-table tr:hover {
            background: #3a3a3a;
        }
        
        .improvement-badge {
            background: #4ade80;
            color: #1a1a1a;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .consideration-badge {
            background: #fbbf24;
            color: #1a1a1a;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>B2 System Architecture Comparison</h1>
        
        <div class="diagram-container">
            <h2>B2 (New Version) - AWS Serverless Architecture</h2>
            <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
                <!-- Frontend Layer -->
                <g id="frontend">
                    <rect x="50" y="50" width="200" height="100" fill="#3b82f6" rx="8"/>
                    <text x="150" y="90" text-anchor="middle" fill="white" font-weight="bold">Frontend</text>
                    <text x="150" y="110" text-anchor="middle" fill="white" font-size="12">TypeScript + Vite</text>
                    <text x="150" y="130" text-anchor="middle" fill="white" font-size="12">Cytoscape.js</text>
                </g>
                
                <!-- CDN -->
                <g id="cdn">
                    <rect x="350" y="50" width="150" height="100" fill="#8b5cf6" rx="8"/>
                    <text x="425" y="90" text-anchor="middle" fill="white" font-weight="bold">CloudFront</text>
                    <text x="425" y="110" text-anchor="middle" fill="white" font-size="12">CDN</text>
                </g>
                
                <!-- S3 -->
                <g id="s3">
                    <rect x="600" y="50" width="150" height="100" fill="#8b5cf6" rx="8"/>
                    <text x="675" y="90" text-anchor="middle" fill="white" font-weight="bold">S3 Bucket</text>
                    <text x="675" y="110" text-anchor="middle" fill="white" font-size="12">Static Files</text>
                </g>
                
                <!-- Authentication -->
                <g id="auth">
                    <rect x="900" y="50" width="200" height="100" fill="#10b981" rx="8"/>
                    <text x="1000" y="90" text-anchor="middle" fill="white" font-weight="bold">Supabase Auth</text>
                    <text x="1000" y="110" text-anchor="middle" fill="white" font-size="12">JWT Provider</text>
                </g>
                
                <!-- API Gateway -->
                <g id="api-gateway">
                    <rect x="150" y="250" width="200" height="100" fill="#f59e0b" rx="8"/>
                    <text x="250" y="290" text-anchor="middle" fill="white" font-weight="bold">API Gateway</text>
                    <text x="250" y="310" text-anchor="middle" fill="white" font-size="12">HTTP + WebSocket</text>
                </g>
                
                <!-- Lambda Authorizer -->
                <g id="authorizer">
                    <rect x="450" y="250" width="200" height="100" fill="#ef4444" rx="8"/>
                    <text x="550" y="290" text-anchor="middle" fill="white" font-weight="bold">JWT Authorizer</text>
                    <text x="550" y="310" text-anchor="middle" fill="white" font-size="12">Lambda Function</text>
                </g>
                
                <!-- Backend Lambda -->
                <g id="backend">
                    <rect x="750" y="250" width="200" height="100" fill="#ef4444" rx="8"/>
                    <text x="850" y="290" text-anchor="middle" fill="white" font-weight="bold">Backend API</text>
                    <text x="850" y="310" text-anchor="middle" fill="white" font-size="12">Go Lambda</text>
                </g>
                
                <!-- EventBridge -->
                <g id="eventbridge">
                    <rect x="300" y="450" width="200" height="100" fill="#a855f7" rx="8"/>
                    <text x="400" y="490" text-anchor="middle" fill="white" font-weight="bold">EventBridge</text>
                    <text x="400" y="510" text-anchor="middle" fill="white" font-size="12">Event Bus</text>
                </g>
                
                <!-- Connect Node Lambda -->
                <g id="connect-lambda">
                    <rect x="600" y="450" width="200" height="100" fill="#ef4444" rx="8"/>
                    <text x="700" y="490" text-anchor="middle" fill="white" font-weight="bold">Connect Node</text>
                    <text x="700" y="510" text-anchor="middle" fill="white" font-size="12">Lambda Function</text>
                </g>
                
                <!-- DynamoDB -->
                <g id="dynamodb">
                    <rect x="450" y="650" width="200" height="100" fill="#059669" rx="8"/>
                    <text x="550" y="690" text-anchor="middle" fill="white" font-weight="bold">DynamoDB</text>
                    <text x="550" y="710" text-anchor="middle" fill="white" font-size="12">Single Table Design</text>
                </g>
                
                <!-- Arrows -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                    </marker>
                </defs>
                
                <!-- Connections -->
                <line x1="250" y1="100" x2="350" y2="100" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="500" y1="100" x2="600" y2="100" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="150" y1="150" x2="250" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="350" y1="300" x2="450" y2="300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="650" y1="300" x2="750" y2="300" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="850" y1="350" x2="400" y2="450" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="500" y1="500" x2="600" y2="500" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="850" y1="350" x2="550" y2="650" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="700" y1="550" x2="550" y2="650" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="1000" y1="150" x2="550" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            </svg>
        </div>
        
        <div class="diagram-container">
            <h2>B2v1 (Old Version) - Traditional Monolithic Architecture</h2>
            <svg viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg">
                <!-- Frontend Layer -->
                <g id="frontend-v1">
                    <rect x="100" y="50" width="300" height="120" fill="#3b82f6" rx="8"/>
                    <text x="250" y="90" text-anchor="middle" fill="white" font-weight="bold">React Frontend</text>
                    <text x="250" y="110" text-anchor="middle" fill="white" font-size="12">TypeScript + React Router</text>
                    <text x="250" y="130" text-anchor="middle" fill="white" font-size="12">Cytoscape.js + React Icons</text>
                    <text x="250" y="150" text-anchor="middle" fill="white" font-size="12">Port: 3000</text>
                </g>
                
                <!-- Backend Server -->
                <g id="backend-v1">
                    <rect x="600" y="50" width="300" height="120" fill="#f59e0b" rx="8"/>
                    <text x="750" y="90" text-anchor="middle" fill="white" font-weight="bold">Express Server</text>
                    <text x="750" y="110" text-anchor="middle" fill="white" font-size="12">Node.js + TypeScript</text>
                    <text x="750" y="130" text-anchor="middle" fill="white" font-size="12">REST API</text>
                    <text x="750" y="150" text-anchor="middle" fill="white" font-size="12">Port: 5000</text>
                </g>
                
                <!-- Shared Types -->
                <g id="shared">
                    <rect x="350" y="250" width="300" height="80" fill="#8b5cf6" rx="8"/>
                    <text x="500" y="280" text-anchor="middle" fill="white" font-weight="bold">@b2/shared</text>
                    <text x="500" y="300" text-anchor="middle" fill="white" font-size="12">TypeScript Type Definitions</text>
                    <text x="500" y="320" text-anchor="middle" fill="white" font-size="12">Shared Between Client & Server</text>
                </g>
                
                <!-- MongoDB -->
                <g id="mongodb">
                    <rect x="100" y="450" width="200" height="100" fill="#059669" rx="8"/>
                    <text x="200" y="490" text-anchor="middle" fill="white" font-weight="bold">MongoDB</text>
                    <text x="200" y="510" text-anchor="middle" fill="white" font-size="12">Mongoose ODM</text>
                    <text x="200" y="530" text-anchor="middle" fill="white" font-size="12">Document Store</text>
                </g>
                
                <!-- LLM Services -->
                <g id="llm">
                    <rect x="400" y="450" width="400" height="100" fill="#10b981" rx="8"/>
                    <text x="600" y="480" text-anchor="middle" fill="white" font-weight="bold">LLM Integration</text>
                    <text x="600" y="505" text-anchor="middle" fill="white" font-size="12">OpenAI API | Google Gemini | Local (Ollama)</text>
                    <text x="600" y="530" text-anchor="middle" fill="white" font-size="12">Configurable AI Provider</text>
                </g>
                
                <!-- File Storage (Legacy) -->
                <g id="files">
                    <rect x="900" y="450" width="200" height="100" fill="#64748b" rx="8"/>
                    <text x="1000" y="490" text-anchor="middle" fill="white" font-weight="bold">JSON Files</text>
                    <text x="1000" y="510" text-anchor="middle" fill="white" font-size="12">(Legacy Storage)</text>
                    <text x="1000" y="530" text-anchor="middle" fill="white" font-size="12">Migrated to MongoDB</text>
                </g>
                
                <!-- Connections -->
                <line x1="400" y1="110" x2="600" y2="110" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="250" y1="170" x2="500" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="750" y1="170" x2="500" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="750" y1="170" x2="200" y2="450" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="750" y1="170" x2="600" y2="450" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <line x1="900" y1="170" x2="1000" y2="450" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
                
                <!-- HTTP Request indicator -->
                <text x="480" y="100" text-anchor="middle" fill="#666" font-size="12">HTTP/REST</text>
            </svg>
        </div>
        
        <h2>Key Architectural Differences</h2>
        
        <div class="comparison-grid">
            <div class="feature-box">
                <h3>B2 (New Version)</h3>
                <ul class="feature-list">
                    <li><span class="label">Architecture:</span> Serverless, Event-Driven</li>
                    <li><span class="label">Frontend:</span> Vanilla TypeScript + Vite</li>
                    <li><span class="label">Backend:</span> Go on AWS Lambda</li>
                    <li><span class="label">Database:</span> DynamoDB (NoSQL)</li>
                    <li><span class="label">Real-time:</span> WebSockets via API Gateway</li>
                    <li><span class="label">Authentication:</span> Supabase (JWT)</li>
                    <li><span class="label">Deployment:</span> AWS CDK</li>
                    <li><span class="label">Hosting:</span> S3 + CloudFront</li>
                    <li><span class="label">Scaling:</span> Auto-scales with AWS</li>
                </ul>
                <div class="tech-stack">
                    <span class="tech-badge">AWS Lambda</span>
                    <span class="tech-badge">DynamoDB</span>
                    <span class="tech-badge">EventBridge</span>
                    <span class="tech-badge">Go</span>
                    <span class="tech-badge">TypeScript</span>
                    <span class="tech-badge">WebSockets</span>
                </div>
            </div>
            
            <div class="feature-box">
                <h3>B2v1 (Old Version)</h3>
                <ul class="feature-list">
                    <li><span class="label">Architecture:</span> Monolithic, Traditional</li>
                    <li><span class="label">Frontend:</span> React + TypeScript</li>
                    <li><span class="label">Backend:</span> Node.js/Express</li>
                    <li><span class="label">Database:</span> MongoDB (Document)</li>
                    <li><span class="label">Real-time:</span> Not implemented</li>
                    <li><span class="label">Authentication:</span> Not implemented</li>
                    <li><span class="label">Deployment:</span> Traditional/Manual</li>
                    <li><span class="label">Hosting:</span> Self-hosted</li>
                    <li><span class="label">Scaling:</span> Manual scaling required</li>
                </ul>
                <div class="tech-stack">
                    <span class="tech-badge">Express.js</span>
                    <span class="tech-badge">MongoDB</span>
                    <span class="tech-badge">React</span>
                    <span class="tech-badge">Node.js</span>
                    <span class="tech-badge">TypeScript</span>
                    <span class="tech-badge">AI/LLM</span>
                </div>
            </div>
        </div>
        
        <div class="differences-section">
            <h2>Detailed Comparison</h2>
            
            <div class="diff-category">
                <h3>Architecture & Infrastructure</h3>
                <table class="diff-table">
                    <tr>
                        <th>Aspect</th>
                        <th>B2v1 (Old)</th>
                        <th>B2 (New)</th>
                        <th>Impact</th>
                    </tr>
                    <tr>
                        <td>Architecture Pattern</td>
                        <td>Monolithic server</td>
                        <td>Microservices + Event-driven</td>
                        <td><span class="improvement-badge">Better scalability</span></td>
                    </tr>
                    <tr>
                        <td>Infrastructure</td>
                        <td>Self-managed servers</td>
                        <td>Serverless AWS</td>
                        <td><span class="improvement-badge">Lower operational overhead</span></td>
                    </tr>
                    <tr>
                        <td>Deployment</td>
                        <td>Manual deployment</td>
                        <td>AWS CDK + GitHub Actions</td>
                        <td><span class="improvement-badge">Automated CI/CD</span></td>
                    </tr>
                    <tr>
                        <td>Cost Model</td>
                        <td>Fixed server costs</td>
                        <td>Pay-per-use</td>
                        <td><span class="improvement-badge">Cost-effective at scale</span></td>
                    </tr>
                </table>
            </div>
            
            <div class="diff-category">
                <h3>Features & Functionality</h3>
                <table class="diff-table">
                    <tr>
                        <th>Feature</th>
                        <th>B2v1 (Old)</th>
                        <th>B2 (New)</th>
                        <th>Impact</th>
                    </tr>
                    <tr>
                        <td>Real-time Updates</td>
                        <td>Not available</td>
                        <td>WebSocket support</td>
                        <td><span class="improvement-badge">Live collaboration</span></td>
                    </tr>
                    <tr>
                        <td>Authentication</td>
                        <td>Not implemented</td>
                        <td>Supabase Auth + JWT</td>
                        <td><span class="improvement-badge">Multi-user support</span></td>
                    </tr>
                    <tr>
                        <td>AI/LLM Integration</td>
                        <td>Multiple providers (OpenAI, Gemini, Local)</td>
                        <td>Not implemented</td>
                        <td><span class="consideration-badge">Feature to port</span></td>
                    </tr>
                    <tr>
                        <td>Categories</td>
                        <td>Hierarchical categories with AI</td>
                        <td>Basic implementation</td>
                        <td><span class="consideration-badge">Feature to enhance</span></td>
                    </tr>
                    <tr>
                        <td>Chat Interface</td>
                        <td>AI chat with context</td>
                        <td>Not implemented</td>
                        <td><span class="consideration-badge">Feature to port</span></td>
                    </tr>
                </table>
            </div>
            
            <div class="diff-category">
                <h3>Development & Maintenance</h3>
                <table class="diff-table">
                    <tr>
                        <th>Aspect</th>
                        <th>B2v1 (Old)</th>
                        <th>B2 (New)</th>
                        <th>Impact</th>
                    </tr>
                    <tr>
                        <td>Frontend Framework</td>
                        <td>React (heavier)</td>
                        <td>Vanilla TS (lighter)</td>
                        <td><span class="improvement-badge">Better performance</span></td>
                    </tr>
                    <tr>
                        <td>Backend Language</td>
                        <td>Node.js/TypeScript</td>
                        <td>Go</td>
                        <td><span class="improvement-badge">Better performance</span></td>
                    </tr>
                    <tr>
                        <td>Type Safety</td>
                        <td>Shared types package</td>
                        <td>OpenAPI generated types</td>
                        <td><span class="improvement-badge">API contract enforcement</span></td>
                    </tr>
                    <tr>
                        <td>Database Schema</td>
                        <td>Flexible MongoDB documents</td>
                        <td>Single-table DynamoDB</td>
                        <td><span class="consideration-badge">Different query patterns</span></td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="differences-section">
            <h2>Features to Consider Porting from B2v1 to B2</h2>
            
            <div class="diff-category">
                <h3>üöÄ High Priority Features</h3>
                <ul class="feature-list">
                    <li><strong>AI/LLM Integration:</strong> The multi-provider LLM support (OpenAI, Gemini, Local) would greatly enhance B2's capabilities</li>
                    <li><strong>Chat Interface:</strong> The AI chat functionality that can reference notes and provide context-aware responses</li>
                    <li><strong>Advanced Categories:</strong> Hierarchical category system with AI-powered auto-categorization</li>
                    <li><strong>Bulk Operations:</strong> Note management features like bulk delete and batch operations</li>
                </ul>
            </div>
            
            <div class="diff-category">
                <h3>üîß Technical Improvements</h3>
                <ul class="feature-list">
                    <li><strong>Settings Management:</strong> The configurable LLM settings and user preferences system</li>
                    <li><strong>Note Search:</strong> Enhanced search capabilities with keyword extraction</li>
                    <li><strong>Export/Import:</strong> Data portability features for backup and migration</li>
                    <li><strong>Rich Text Support:</strong> Enhanced note formatting capabilities</li>
                </ul>
            </div>
            
            <div class="diff-category">
                <h3>‚ö†Ô∏è Architectural Considerations</h3>
                <ul class="feature-list">
                    <li><strong>LLM in Lambda:</strong> Consider cold starts and timeout limits for AI operations</li>
                    <li><strong>DynamoDB Queries:</strong> May need to adapt MongoDB's flexible queries to DynamoDB's patterns</li>
                    <li><strong>File Storage:</strong> B2 would need S3 integration for any file/attachment features</li>
                    <li><strong>Cost Management:</strong> AI API calls in serverless can be expensive at scale</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>